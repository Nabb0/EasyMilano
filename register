@app.route('/register', methods=['GET','POST'])
def register():
    if request.method == 'GET':
        return  render_template('register.html')
    else: 
        name = request.args['name']
        surname = request.args['surname']
        via = request.args['via']
        pwd = request.args['pwd']
        cpwd = request.args['cpwd']

    if name != '' and pwd != '' and surname != '' and pwd == cpwd and via != '':
        df = pd.read_json()('static/file/dati.json')
        df.append({'name': name, 'surname': surname,'via' : via,'pwd': pwd}, ignore_index=True)   
        df.to_json('static/file/dati.json')
        return render_template('ok.html',name = name, surname = surname, via = via, pwd = pwd, df = df)
    else:
        return f'errore {username,pwd,cpwd,sex}'



# vecchio register


    if request.method == 'GET':
        return render_template('register.html')
    else:
        name = request.form.get("name")
        surname = request.form.get("surname")
        psw = request.form.get("pwd")
        cpsw = request.form.get("cpwd")
        email = request.form.get("email")
        via = request.form.get("via")
        civico = request.form.get('civico')
        
        utente = [{"name": name,"surname":surname, "psw": psw,"email":email,"via":via,"civico":civico}]
        
        if cpsw!= psw:
            return 'le password non corrispondono'
        else:
            dati = dati.append(utente,ignore_index=True)
            dati.to_csv('./static/file/dati.csv',index=False)
            return render_template('login.html', name = name, surname = surname, psw = psw , via = via,utente = utente, email = email, civico = civico)
       
            # register bono e porta

    if request.method == 'GET':
        return render_template("register.html")
    else:
        global dati
        name = request.form.get("name")
        surname = request.form.get("surname")
        psw = request.form.get("pwd")
        cpsw = request.form.get("cpwd")
        email = request.form.get("email")
        via = request.form.get("via")
        civico = request.form.get('civico')
        utente = [{"name": name,"surname":surname, "psw": psw,"email":email,"via":via,"civico":civico}]
        dati = dati.append(utente,ignore_index=True)
        dati.to_csv('./static/file/dati.csv',index=False)
        if psw == cpsw:
            return redirect(url_for('login'))
        else:
            return "<h1>LE PASSWORD NON CORRISPONDONO</h1>"

# vecchio login(da risolvere)





# login porta e bono(non mi funziona ancora)
    if request.method == 'GET':
        return render_template('login.html')
    else:
        l_email = request.form.get("email")
        l_psw = request.form.get("pwd")
        print('email =',l_email ,'psw =', l_psw)
        print(dati)
        if email in dati.email.tolist():
            email = dati[dati.email == l_email]
            if list(utente.Password)[0] == password:    
                session['username'] = username
            return redirect(url_for('home'))
        else:
            return redirect(url_for('login'))

